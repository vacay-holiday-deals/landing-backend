{% extends 'layouts.html' %} {% block body %}
<div class="home--container">
  <div class="login--container">
    {% from 'includes/_formhelpers.html' import render_field %}
    <p style="color: red;">{{ error }}</p>
    <form
      onsubmit="handleSubmit()"
      action="{{ url_for('main.login') }}"
      method="post"
    >
      <div class="form--logo">
        <img
          src="{{url_for('static', filename='images/logo.png')}}"
          alt="company logo"
        />
      </div>
      <h4 class="form--heading">Please Login</h4>
      <div class="form-group">
        {{ render_field(form.username, class_='form-control', id='username', placeholder='username')}}
      </div>
      <div class="form-group">
        {{ render_field(form.password, class_='form-control', id='password', placeholder='password')}}
      </div>
      <div class="button">
        <button id="login--btn" type="submit" class="btn btn-primary btn-block">
          Login
          <span
            id="spinner"
            style="visibility: hidden"
            class="spinner-border spinner-border-sm"
          ></span>
        </button>
      </div>
    </form>
    <br />
    <p>
      Found problems?
      <a
        href="MAILTO:sales@vacay.co.ke.com?cc=mymbugua@gmail.com&subject=problem with login"
        >contact admin</a
      >
    </p>
  </div>
</div>

<script>
  function handleSubmit(e) {
    loginButton = document.getElementById("login--btn");
    loginButton.classList.add("disabled");
    spinner = document.getElementById("spinner").style.visibility = "visible";
  }
</script>
{% endblock body%}
